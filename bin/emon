#!/usr/bin/env ruby

test = ARGV[0] || `v`
filename = test.split(':').first

if filename.end_with?("_test.exs")
  filename = filename.sub(/.*apps\/.*?\//, "")
  cmd = ["nodemon", "-w", ".", "-e", "ex exs", "--exec", "mix test #{filename}"]
  system(*cmd)
else
  puts "Not editing an elixir test file"
end
