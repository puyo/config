#!/usr/bin/env ruby
#
# Greg's gvim wrapper. Parses arguments and opens all sorts of random junk I
# paste into it. ;)

osx = File.exist?('/Applications')
vim = if osx then 'mvim' else 'gvim' end
file = line = nil

if ARGV.any?
  file, line = ARGV.first.split(':')
  ARGV[0] = file
  system(vim, '--remote-silent', *ARGV)
  system(vim, '--remote-send', ":#{line}<CR>") if line
else
  system(vim)
end
