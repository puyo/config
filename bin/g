#!/usr/bin/env ruby
#
# Greg's gvim wrapper. Parses arguments and opens all sorts of random junk I
# paste into it. ;)

def osx?
  File.exist?('/Applications')
end

def vim
  if osx? then 'mvim' else 'gvim' end
end

file, line = ARGV.first.split(':')
ARGV[0] = file
if osx?
  system('open', '-a', 'MacVim', *ARGV)
else
  system('gvim', '--remote-silent', *ARGV)
end
system(vim, '--remote-send', ":#{line}<CR>") if line
